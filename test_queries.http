###############################################################################
# NPC Memory Demo - API Test Queries
# Install VS Code REST Client extension to use this file
# Click "Send Request" above any ### separator to execute
###############################################################################

@baseUrl = http://localhost:8000
@playerId = 1
@npcId = 1

###############################################################################
# SYSTEM ENDPOINTS
###############################################################################

### Health Check
GET {{baseUrl}}/health

###############################################################################
# PLAYER MANAGEMENT
###############################################################################

### Create Player (Simple)
POST {{baseUrl}}/create_player
Content-Type: application/json

{
  "name": "test_player_001",
  "email": "test@example.com",
  "display_name": "Test Player",
  "role": "player"
}

### Get All Players (with pagination)
GET {{baseUrl}}/players?skip=0&limit=50

### Create Player with UUID and PIN
POST {{baseUrl}}/create_player_page
Content-Type: application/x-www-form-urlencoded

uuid=550e8400-e29b-41d4-a716-446655440000&pin=1234&displayName=John Doe

### Verify Player Credentials
GET {{baseUrl}}/verify_player?uuid=550e8400-e29b-41d4-a716-446655440000&pin=1234

###############################################################################
# CHAT & NPC INTERACTIONS
###############################################################################

### Chat API (JSON Response)
POST {{baseUrl}}/chat_api
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&npc_id={{npcId}}&dialogue=Hello Dax! I need help choosing an engine for my F1 car.

### Store Interaction (JSON)
POST {{baseUrl}}/store_interaction/
Content-Type: application/json

{
  "player_id": {{playerId}},
  "npc_id": {{npcId}},
  "dialogue": "What tires should I use for wet conditions?"
}

### Get Player Interactions
GET {{baseUrl}}/get_interactions/{{playerId}}

### Delete Interaction
DELETE {{baseUrl}}/delete_interaction/1

###############################################################################
# CAR BUILD MANAGEMENT
###############################################################################

### Save Car Build
POST {{baseUrl}}/save_car_build
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&chassis=standard monocoque&engine=2004 v10&tires=c5 slick&frontWing=high lift&rearWing=high downforce

### Get Player Builds
GET {{baseUrl}}/get_builds/{{playerId}}?skip=0&limit=10

###############################################################################
# CONSENT & EVALUATION
###############################################################################

### Store Consent Data
POST {{baseUrl}}/store_consent
Content-Type: application/json

{
  "player_id": {{playerId}},
  "study_uuid": "550e8400-e29b-41d4-a716-446655440000",
  "name": "John Doe",
  "course": "Computer Science",
  "bth_email": "john.doe@bth.se",
  "gender": "Male",
  "current_year": "3rd Year",
  "origin": "Sweden",
  "gaming_experience": "Expert",
  "ai_familiarity": "Intermediate",
  "consent_participate": true,
  "consent_data": true,
  "consent_age": true,
  "consent_future": false,
  "consent_results": true
}

###############################################################################
# EDGE CASES & ERROR TESTING
###############################################################################

### Empty Dialogue (Should fail with 400)
POST {{baseUrl}}/chat_api
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&npc_id={{npcId}}&dialogue=

### Non-existent Player (Should fail with 404)
GET {{baseUrl}}/get_interactions/99999

### Invalid UUID Format (Should fail with 400)
GET {{baseUrl}}/verify_player?uuid=invalid-uuid&pin=1234

###############################################################################
# PERFORMANCE TESTING
###############################################################################

### Multiple Rapid Requests (Test caching)
POST {{baseUrl}}/chat_api
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&npc_id={{npcId}}&dialogue=Test message 1

###

POST {{baseUrl}}/chat_api
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&npc_id={{npcId}}&dialogue=Test message 2

###

POST {{baseUrl}}/chat_api
Content-Type: application/x-www-form-urlencoded

player_id={{playerId}}&npc_id={{npcId}}&dialogue=Test message 3
